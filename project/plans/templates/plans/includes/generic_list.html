{% load get_item %}
{% load slippers %}
{% load i18n %}
{% load slippers %}
{% load math %}
{% load cache %}


<table class="table table-sm table-striped table-hover">
    <thead>
        <tr>
            <th class="text-start">{% translate 'Title' %}</th>
            {% cache 500 toprow %}
            <th class="w7p">{% translate 'January' %}</th>
            <th class="w7p">{% translate 'February' %}</th>
            <th class="w7p">{% translate 'March' %}</th>
            <th class="w7p">{% translate 'April' %}</th>
            <th class="w7p">{% translate 'May' %}</th>
            <th class="w7p">{% translate 'June' %}</th>
            <th class="w7p">{% translate 'July' %}</th>
            <th class="w7p">{% translate 'August' %}</th>
            <th class="w7p">{% translate 'September' %}</th>
            <th class="w7p">{% translate 'October' %}</th>
            <th class="w7p">{% translate 'November' %}</th>
            <th class="w7p">{% translate 'December' %}</th>
            <th colspan="2"></th>
            {% endcache %}
        </tr>
    </thead>
    <tbody>
        {% for item in items %}

        {% if update %}{% url update item.id as url_update %}{% endif %}
        {% if delete %}{% url delete item.id as url_delete %}{% endif %}
        {% with item|get_obj_attr:type as name %}
        <tr hx-get="{{url_update}}" hx-target="#dialog" hx-trigger="dblclick" class="{% if name == _('Residual') %} bg-warning{% endif %}">
            <td class="text-start">{{ name }}{% if item.expense_type.necessary or item.saving_type or item.title %} <i class="bi bi-star plans-star"></i>{% endif %}</td>
            {% table_cell value=item.january|price %}
            {% table_cell value=item.february|price %}
            {% table_cell value=item.march|price %}
            {% table_cell value=item.april|price %}
            {% table_cell value=item.may|price %}
            {% table_cell value=item.june|price %}
            {% table_cell value=item.july|price %}
            {% table_cell value=item.august|price %}
            {% table_cell value=item.september|price %}
            {% table_cell value=item.october|price %}
            {% table_cell value=item.november|price %}
            {% table_cell value=item.december|price %}
            {% edit_cell url=url_update %}
            {% delete_cell url=url_delete %}
        </tr>{% endwith %}
        {% empty %}
        <tr class="table table-sm-warning text-center">
            <td colspan="13" class="py-2">
                {% blocktranslate with year=year|title %}No records in <b>{{ year }}</b>.{% endblocktranslate %}
            <td></td>
        </tr>
        {% endfor %}
    </tbody>
</table>

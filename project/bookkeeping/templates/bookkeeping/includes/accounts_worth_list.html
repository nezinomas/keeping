{% load table_cell %}
{% load i18n %}

<table class="table table-striped table-hover stats">
    <thead class="thead-light">
        <tr class="top">
            <th colspan="7">{% translate 'Accounts' %}</th>
        </tr>
        <tr>
            <th class="text-start">{% translate 'Account' %}</th>
            <th>01.01</th>
            <th>{% translate 'Incomes' %}</th>
            <th>{% translate 'Expenses' %}</th>
            <th>{% translate 'Balance' %}</th>
            <th class="text-end bl">{% translate 'Have' %}</th>
            <th>{% translate 'Delta' %}</th>

        </tr>
    </thead>
    <tbody>
        {% for item in accounts.items %}
        <tr>
            <td data-bs-toggle="tooltip" data-bs-html="true" data-bs-placement="right" data-bs-title="{{ item.latest_check }}" class="text-start">
                <div style="position:relative;">
                    {{ item.title }}
                    <span style="position: absolute; top: -0.5px; right: 5px; display: block;">
                        <button type="button" data-url="{% url 'bookkeeping:accounts_worth_reset' item.account_pk %}" class="btn btn-super-sm btn-outline-info reset">{% translate 'Reset' %}</button>
                    </span>
                </div>
            </td>
            {% cell item.past css_class='w7' %}
            {% cell item.incomes css_class='w7' %}
            {% cell item.expenses css_class='w7' %}
            {% cell item.balance css_class='w7' %}
            {% cell item.have css_class='bl w7' %}
            {% cell item.delta css_class='w7' highlight_value=True default_if_empty='ok' %}
        </tr>
        {% endfor %}
    </tbody>
    <tfoot>
        <tr  class="total">
            <th class="text-start">{% translate 'Total' %}</th>
            {% cell accounts.total_row.past tag="th" %}
            {% cell accounts.total_row.incomes tag="th" %}
            {% cell accounts.total_row.expenses tag="th" %}
            {% if accounts.accounts_amount|floatformat:2 != accounts.months_amount|floatformat:2 %}{% cell accounts.total_row.balance tag="th" css_class='bad' text_before='!' text_after='!' %}{% else %}{% cell accounts.total_row.balance tag="th" %}{% endif %}
            {% cell accounts.total_row.have tag="th" css_class='bl' %}
            {% cell accounts.total_row.delta tag="th" %}
        </tr>
    </tfoot>
</table>


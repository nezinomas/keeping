{% load table_cell %}
{% load i18n %}
{% load slippers %}

<table class="table table-striped table-hover stats">
    <thead class="thead-light">
        <tr class="top">
            <th colspan="8">{% regenerate_balances type='accounts' %}{% translate 'Accounts' %}</th>
        </tr>
        <tr>
            <th class="text-start" colspan="2">{% translate 'Account' %}</th>
            <th>01.01</th>
            <th>{% translate 'Incomes' %}</th>
            <th>{% translate 'Expenses' %}</th>
            <th>{% translate 'Balance' %}</th>
            <th class="text-end bl">{% translate 'Have' %}</th>
            <th>{% translate 'Delta' %}</th>
        </tr>
    </thead>
    <tbody>
        {% for item in items %}
        <tr>
            <td data-bs-toggle="tooltip" data-bs-html="true" data-bs-placement="right" data-bs-title="{{ item.latest_check|default:_('Not specified') }}" class="text-start no-right-border">
                {{ item.title }}
            </td>
            <td class="no-left-border w5"><button type="button" hx-get="{% url 'bookkeeping:accounts_worth_reset' item.account_pk %}" class="btn btn-super-sm btn-outline-info rounded-1">{% translate 'Reset' %} {% translate 'Have' %}</button></td>
            {% cell item.past css_class='w7' %}
            {% cell item.incomes css_class='w7' %}
            {% cell item.expenses css_class='w7' %}
            {% cell item.balance css_class='w7' %}
            {% cell item.have css_class='bl w7' %}
            {% cell item.delta css_class='w7' highlight_value=True default_if_empty='ok' %}
        </tr>
        {% endfor %}
    </tbody>
    <tfoot>
        <tr  class="total">
            <th class="text-start" colspan="2">{% translate 'Total' %}</th>
            {% cell total_row.past tag="th" %}
            {% cell total_row.incomes tag="th" %}
            {% cell total_row.expenses tag="th" %}
            {% cell total_row.balance css_class="check" tag="th" %}
            {% cell total_row.have tag="th" css_class='bl' %}
            {% cell total_row.delta tag="th" %}
        </tr>
    </tfoot>
</table>

{% load table_cell %}{% load get_item %}
<table class="table table-striped table-hover stats">
    <thead class="thead-light">
        <tr class="top">
            <th>{{ name }}</th>
            <th class="text-right" width="7.5%">Sausis</th>
            <th class="text-right" width="7.5%">Vasaris</th>
            <th class="text-right" width="7.5%">Kovas</th>
            <th class="text-right" width="7.5%">Balandis</th>
            <th class="text-right" width="7.5%">Gegužė</th>
            <th class="text-right" width="7.5%">Birželis</th>
            <th class="text-right" width="7.5%">Liepa</th>
            <th class="text-right" width="7.5%">Rugpjūtis</th>
            <th class="text-right" width="7.5%">Rugsėjis</th>
            <th class="text-right" width="7.5%">Spalis</th>
            <th class="text-right" width="7.5%">Lapkritis</th>
            <th class="text-right" width="7.5%">Gruodis</th>
            <th class="text-right" width="7.5%">Viso</th>
        </tr>
    </thead>
    <tbody>
        {% regroup items by title as grouped %}
        {% for title in grouped %}
        <tr>
            <td>{{ title.grouper }}</td>
            {% for i in months %}{% with title.list|get_sum_by_month:i as sum %}{% cell sum %}{% endwith %}</td>{% endfor %}
            {% with total_col|get_sum_by_title:title.grouper as col_value %}
            <td>{{ col_value }}</td>{% endwith %}
        </tr>
        {% endfor %}
    </tbody>
    <tfoot>
        <tr>
            <td>Viso</td>
            {% for i in months %}{% with total_row|get_sum_by_month:i as sum %}{% cell sum %}{% endwith %}</td>{% endfor %}
            <td>{{ total }}</td>
        </tr>
    </tfoot>
</table>

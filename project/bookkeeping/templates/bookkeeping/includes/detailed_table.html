{% load table_cell %}{% load get_item %}
<table class="table table-striped table-hover stats">
    <thead class="thead-light">
        <tr class="top">
            <th>{{ name }}</th>
            <th class="text-end w7p">Sausis</th>
            <th class="text-end w7p">Vasaris</th>
            <th class="text-end w7p">Kovas</th>
            <th class="text-end w7p">Balandis</th>
            <th class="text-end w7p">Gegužė</th>
            <th class="text-end w7p">Birželis</th>
            <th class="text-end w7p">Liepa</th>
            <th class="text-end w7p">Rugpjūtis</th>
            <th class="text-end w7p">Rugsėjis</th>
            <th class="text-end w7p">Spalis</th>
            <th class="text-end w7p">Lapkritis</th>
            <th class="text-end w7p">Gruodis</th>
            <th class="text-end w7p">Viso</th>
        </tr>
    </thead>
    <tbody>
        {% regroup items by title as grouped %}
        {% for title in grouped %}
        <tr>
            <td class="text-start">{{ title.grouper }}</td>
            {% for i in months %}
                {% with title.list|get_sum_by_month:i as sum %}{% cell sum %}{% endwith %}
            {% endfor %}
            {% with total_col|get_sum_by_title:title.grouper as col_value %}
            <td>{{ col_value }}</td>{% endwith %}
        </tr>
        {% endfor %}
    </tbody>
    <tfoot>
        <tr>
            <th class="text-start">Viso</th>
            {% for i in months %}{% with total_row|get_sum_by_month:i as sum %}{% cell sum tag='th' %}{% endwith %}{% endfor %}
            <th>{{ total }}</th>
        </tr>
    </tfoot>
</table>

<style>
    tfoot > tr > th {
        font-weight: bold!important;
        color: gray;
        background-color: aliceblue!important;
    }
</style>

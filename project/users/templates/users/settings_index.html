{% extends 'base.html' %}

{% block head %}
<style>
    .settings_row {
        background-color: aliceblue;
        margin: 0.5rem 0;
        padding: 0!important;
    }
    .settings_row .btn-sm {
        margin: 0.2rem 0;
    }
</style>
{% endblock head %}

{% block content %}

<div class="row mt-2 mx-0">
    <div class="col text-center bg-light"><h6 class="pt-1 pb-2">Settings</h6></div>
</div>

<div class="row">
    <div class="col">
        <div class="row settings_row">
            <div class="col"><h6 class="pb-2">Users</h6></div>
            <div class="col text-end pe-0 me-2"><a role="button" class="btn btn-sm btn-primary js-invite" data-url="{% url 'users:invite' %}">Sent invite link</a></div>
        </div>
        <div id="user_list" class="mt-3">{{ users }}</div>
    </div>

    <div class="col">
        <div class="row settings_row">
            <div class="col"><h6 class="pb-2">Nebūtinos išlaidos</h6></div>
        </div>
        <div id="unnecessary_ajax" class="mt-3">{{ unnecessary }}</div>
    </div>
</div>

<script>
    $(function () {
        var unnecesaryForm = function (event) {
            var form = $('.js_unnecessary_form');
            var ajax_update_container = 'unnecessary_ajax'

            $.ajax({
                url: "{% url 'users:settings_unnecessary' %}",
                data: new FormData($('.js_unnecessary_form')[0]), // The form with the file inputs.
                processData: false,
                contentType: false,
                type: form.attr("method"),
                dataType: 'json',
                success: function (data) {
                    $(`#${ajax_update_container}`).html(data.html_form);
                }
            });
            return false;
        };

        /* Binding */
        $(document).on('click', '#unnecessary_submit', unnecesaryForm);
    });

</script>
{% endblock content %}

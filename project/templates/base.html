{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <script type="text/javascript" src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/jquery-ui-1.11.3.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/popper1.14.3.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'bootstrap/js/bootstrap-4.5.2.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/moment-with-locales-2.9.0.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'bootstrap_datepicker/js/bootstrap-datetimepicker-4.17.47.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'bootstrap_datepicker_plus/js/datepicker-widget.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/ajax.js' %}"></script>

    <link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap-4.5.2.min.css' %}" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{% static 'bootstrap_datepicker/css/bootstrap-datetimepicker-4.17.47.css' %}" />
    <link rel="stylesheet" href="{% static 'bootstrap_datepicker_plus/css/datepicker-widget.css' %}" />
    <link rel="stylesheet" href="{% static 'css/app_global.css' %}" />

    {% block head %}{% endblock head %}

    <title>Bookkeeping</title>
  </head>

  <body>
    {% block body %}
    <!-- top navidation bar -->
    <div class="container-fluid">
      <nav class="navbar navbar-expand navbar-light bg-light">
        <ul class="nav nav-pills">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">{{ request.user.year|title }}</a>
            <div class="dropdown-menu">
              {% for y in years %}
              <a class="dropdown-item btn-sm py-1 pl-2" href="{% url 'core:set_year' y %}">{{ y|safe }}</a>
              {% endfor %}
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if '/' == request.path %}active{% endif %}" href="{% url 'bookkeeping:index' %}">Bendra</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if '/month/' == request.path %}active{% endif %}" href="{% url 'bookkeeping:month' %}">Mėnuo</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if '/detailed/' == request.path %}active{% endif %}" href="{% url 'bookkeeping:detailed' %}">Detali</a>
          </li>

          <li class="nav-item">
            <div class="btn-group">
              <a class="btn btn-menu pr-1 nav-link {% if '/expenses/' in request.path %}active{% endif %}" href="{% url 'expenses:expenses_index' %}">Išlaidos</a>
              <button type="button" class="btn btn-menu pl-0 nav-link {% if '/expenses/' in request.path %}active{% endif %} dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <span class="sr-only">Toggle Dropdown</span>
              </button>
              <div class="dropdown-menu">
                {% for m in context_months %}
                {% with m|date:'n' as m_num %}
                    <a class="dropdown-item btn-sm" href="{% url 'expenses:expenses_month_list' forloop.counter %}">{{ m|date:'F'|title }}</a>
                    {% endwith %}{% endfor %}
                    <div role="separator" class="dropdown-divider"></div>
                    <a class="dropdown-item btn-sm" href="{% url 'expenses:expenses_month_list' 13 %}">Visi įrašai</a>
              </div>
            </div>
          </li>

          <li class="nav-item">
            <a class="nav-link {% if '/incomes/' in request.path %}active{% endif %}" href="{% url 'incomes:incomes_index' %}">Pajamos</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if '/transactions/' in request.path %}active{% endif %}"
              href="{% url 'transactions:transactions_index' %}">Pervedimai</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if '/savings/' in request.path %}active{% endif %}"
              href="{% url 'savings:savings_index' %}">Taupymas</a>
          </li>

          <li class="nav-item">
            <div class="btn-group">
              <a class="btn btn-menu pr-1 nav-link {% if '/books/' in request.path %}active{% endif %}"
                href="{% url 'books:books_index' %}">Knygos</a>
              <button type="button"
                class="btn btn-menu pl-0 nav-link {% if '/books/' in request.path %}active{% endif %} dropdown-toggle dropdown-toggle-split"
                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <span class="sr-only">Toggle Dropdown</span>
              </button>
              <div class="dropdown-menu">
                <a class="dropdown-item btn-sm" href="{% url 'books:books_all' %}">Visos knygos</a>
              </div>
            </div>
          </li>

          <li class="nav-item">
            <div class="btn-group">
              <a class="btn btn-menu pr-1 nav-link {% if '/drinks/' in request.path %}active{% endif %}" href="{% url 'drinks:drinks_index' %}">Gėrimai</a>
              <button type="button" class="btn btn-menu pl-0 nav-link {% if '/drinks/' in request.path %}active{% endif %} dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <span class="sr-only">Toggle Dropdown</span>
              </button>
              <div class="dropdown-menu">
                <a class="dropdown-item btn-sm" href="{% url 'drinks:drinks_list' %}">Duomenys</a>
                <a class="dropdown-item btn-sm" href="{% url 'drinks:drinks_history' %}">Istorija</a>
              </div>
            </div>
          </li>

          <li class="nav-item">
            <div class="btn-group">
              <a class="btn btn-menu pr-1 nav-link {% if '/counts/' in request.path %}active{% endif %}" href="{% url 'counts:counts_index' %}">Kiek</a>
              <button type="button" class="btn btn-menu pl-0 nav-link {% if '/counts/' in request.path %}active{% endif %} dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <span class="sr-only">Toggle Dropdown</span>
              </button>
              <div class="dropdown-menu">
                <a class="dropdown-item btn-sm" href="{% url 'counts:counts_list' %}">Duomenys</a>
                <a class="dropdown-item btn-sm" href="{% url 'counts:counts_history' %}">Istorija</a>
              </div>
            </div>
          </li>

          <li class="nav-item">
            <a class="nav-link {% if '/plans/' in request.path %}active{% endif %}"
              href="{% url 'plans:plans_index' %}">Planavimas</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if '/summary/' in request.path %}active{% endif %}"
              href="{% url 'bookkeeping:summary' %}">Suvestinės</a>
          </li>
        </ul>
        <span class="navbar-text px-1">{{ yday }} / <b>{{ ydays }}</b></span>

        <div class="collapse navbar-collapse">
          <ul class="navbar navbar-nav ml-auto">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
                aria-expanded="false">{{ user.username }}</a>
              <div class="dropdown-menu dropdown-menu-right">
                <a class="dropdown-item btn-sm pl-2" href="{% url 'users:logout' %}">Log out</a>
              </div>
            </li>
          </ul>
        </div>

      </nav>

      {% block content %}{% endblock content %}

    </div>
    {% endblock body %}
  </body>
</html>

{% extends 'base.html' %}

{% load static %}
{% load i18n %}
{% load slippers %}

{% block head %}

<script src="https://code.highcharts.com/highcharts.src.js"></script>
<script src="https://code.highcharts.com/modules/heatmap.js"></script>
<script src="{% static 'js/highcharts_themes/my-theme.js' %}"></script>
<link rel="stylesheet" href="{% static 'js/highcharts_themes/my-theme.css' %}">
<script src="{% static 'js/chart_calendar.js' %}"></script>
<script src="{% static 'js/chart_drinks_quantity.js' %}"></script>
<script src="{% static 'js/chart_drinks_consumption.js' %}"></script>
<script src="{% static 'js/chart_drinks_compare.js' %}"></script>
<script src="{% static 'js/chart_drinks_summary.js' %}"></script>
<script src="{% static 'js/sticky-table-headers.js' %}"></script>

<style>
    tr.std-av-border {
        border-top: double #ffc000;
        border-bottom: double #ffc000;
    }
    #div_id_year1, #div_id_year2 {
        margin-bottom: 0!important;
    }
</style>

{% endblock head %}


{% block content %}

<nav id="drinks-nav">
    <ul
        x-data="{
            openTab: 'index',
            activeClass: 'btn-info',
            inactiveClass: 'btn-light',
        }">
        <li>
            <button
                class="btn btn-sm"
                :class="openTab === 'index' ? activeClass : inactiveClass"
                @click="openTab = 'index'"
                hx-get="{% url 'drinks:tab_index' %}"
                hx-target="#tab_content">
            {% translate 'Charts' %}
            </button>
        </li>
        <li>
            <button
                class="btn btn-sm"
                :class="openTab === 'data' ? activeClass : inactiveClass"
                @click="openTab = 'data'"
                hx-get="{% url 'drinks:tab_data' %}"
                hx-target="#tab_content">
                {% translate 'Data' %}
            </button>
        </li>
        <li>
            <button
                class="btn btn-sm"
                :class="openTab === 'history' ? activeClass : inactiveClass"
                @click="openTab = 'history'"
                hx-get="{% url 'drinks:tab_history' %}"
                hx-target="#tab_content">
                {% translate 'History' %}
            </button>
        </li>

        <li class="dropdown">
            <a id="dropdownDrinkType" class="dropdown__title" href="#">{{current_drink_type}}</a>
            <ul class="dropdown__menu">
                {% for type in select_drink_type %}
                    <li><a class="dropdown-item btn-sm" href="{% url 'drinks:set_drink_type' type.1 %}">{{type.0}}</a></li>
                {% endfor %}

            </ul>
        </li>

        <li>
            {% url 'drinks:new' tab as url_drinks %}
            {% translate "Drinks" context "drinks button" as drinks_button_title %}
            {% new_button url=url_drinks title=drinks_button_title css_class="btn-outline-success" %}
        </li>

        <li>
            {% url 'drinks:target_new' tab as url_drinks_target %}
            {% new_button url=url_drinks_target title=_('Goal for the year') css_class="btn-info" %}
        </li>
    </ul>
</nav>

<!-- htmx tab data load -->
<div hx-get="{% url 'drinks:tab_index' %}" hx-target="#tab_content" hx-trigger="reloadIndex from:body"></div>
<div hx-get="{% url 'drinks:tab_data' %}" hx-target="#tab_content" hx-trigger="reloadData from:body"></div>
<div hx-get="{% url 'drinks:tab_history' %}" hx-target="#tab_content" hx-trigger="reloadHistory from:body"></div>

<!-- tab content -->
<div id="tab_content">
    {{content}}
</div>

{% endblock content %}
